@model List<WebBanCaCanh.Models.Category>
@{
    ViewBag.Title = "Home Page";
}

<div id="banner-slideshow">
    <div class="banner-container">
        @foreach (var banner in ViewBag.Banners)
        {
            if (banner.IsVisible)
            {
                <div class="banner">
                    <img src="/Content/Images/@banner.ImageUrl" alt="@banner.Content" />
                </div>
            }
        }
    </div>
    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>
</div>

@for (int i = 0; i < Model.Count; i++)
{
    var category = Model[i];
    var sectionClass = i == 0 ? "first-category" : "";
    <section id="@category.CategoryId" class="@sectionClass">
        <h2 class="my-2">@category.CategoryName</h2>
        <hr />
        <div class="row">
            @foreach (var product in category.Products)
            {
                @Html.Partial("_ProductCardPartial", product)
            }
        </div>
    </section>
}

@section scripts {
    <script>
        $(document).ready(function () {
            var slideIndex = 0;
            showSlides();

            function showSlides() {
                var slides = $(".banner");
                if (slides.length == 0) return;
                for (var i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }
                slideIndex++;
                if (slideIndex > slides.length) { slideIndex = 1 }
                slides[slideIndex - 1].style.display = "block";
                setTimeout(showSlides, 6000); // Change image every 6 seconds
            }

            $(".prev").click(function () {
                slideIndex--;
                showSlides();
            });

            $(".next").click(function () {
                slideIndex++;
                showSlides();
            });
        });
    </script>
}

<style>
    .first-category {
        margin-top: 50px; /* Adjust the value as needed */
    }
</style>
